<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>テトリス</title>
        <style type="text/css">
        body{
            background-color: #fff;
        }
        #screen{
            width: 100%;
            height: 100%;
            /*background-color: #000;*/
        }
        </style>
    </head>
    <body>
        <div>
            <div id="screen"><canvas id="canvas"></canvas></div>
            <div id="control">
            <button id="move_left_btn" type="button">◀</button>
            <button id="move_down_btn" type="button">▼</button>
            <button id="move_right_btn" type="button">▶</button>
            <button id="move_right_btn" type="button">○</button>
            </div>
        </div>
        <script type="text/javascript">
        const BLOCK_SIZE_W = 25;//横のブロックサイズ
        const BLOCK_SIZE_H = 25;//縦のブロックサイズ
        const BLOCK_FILL_STYLE = 'rgb(0,0,255)';//ブロック色
        const BLOCK_STROKE_STYLE = 'rgb(168,168,255)';//ブロック枠の色
        const MAP_FILL_STYLE = 'rgb(0,0,0)';//マップ色
        //ブロック定義
        const BLOCK = [
            [
                [1]
            ],
            [
                [1],
                [1],
                [1],
                [1]
            ],
            [
                [1],
                [1],
                [1,1]
            ],
            [
                [1],
                [1,1]
            ],
            [
                [1],
                [1,1],
                [1]
            ]
        ];

        //マップ定義
        let MAP = [
            [0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0]
        ];
        //var MOVE_X = 0;
        //var MOVE_Y = 0;
        
        let CANVAS = document.getElementById('canvas');
        CANVAS.width = BLOCK_SIZE_W * MAP[0].length;
        CANVAS.height = BLOCK_SIZE_H * MAP.length;
        let CTX = CANVAS.getContext('2d');
        
        //マップにブロック作成
        let block_no = Math.floor(Math.random() * BLOCK.length);
        MAP = createBlock(MAP, BLOCK[block_no]);
        //マップ作成
        createMap(CTX, MAP);
        
        //マップ作成関数
        function createMap(ctx, map){
            //iが高さでjが幅
            for(let i=0;i < map.length;i++){
                for(let j=0;j < map[i].length;j++){
                    if(map[i][j] == 0){
                        ctx.fillStyle = MAP_FILL_STYLE;
                    }else{
                        ctx.fillStyle = BLOCK_FILL_STYLE;
                        ctx.strokeStyle = BLOCK_STROKE_STYLE;
                        ctx.strokeRect(BLOCK_SIZE_W * j, BLOCK_SIZE_H * i, BLOCK_SIZE_W, BLOCK_SIZE_H);
                    }
                    ctx.fillRect(BLOCK_SIZE_W * j, BLOCK_SIZE_H * i, BLOCK_SIZE_W, BLOCK_SIZE_H);
                }
            }
        }

        //ブロック作成関数
        function createBlock(map, block){
            let map_dt = map;
            //let block_dt = block[block_no];
            for(let i=0;i < block.length;i++){
                for(let j=0;j < block[i].length;j++){
                    map_dt[i][j] = block[i][j];
                }
            }
            return map_dt;
        }
        
        </script>
    </body>
</html>